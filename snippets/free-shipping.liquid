{% comment %}
Uses : {%  render 'free-shipping'  %}
{% endcomment %}
<div class="shipping-bar">
    {% liquid
      assign free_shipping = settings.free_shipping | times: 1
      assign cart_price = cart.total_price | divided_by: 100
      assign change = free_shipping | minus: cart_price
      assign perc_change = 100
      if change > 0
        assign perc_change = change | times: 100 | divided_by: free_shipping
        assign perc_change = 100 | minus: perc_change
      endif
    %}
    <h2 class="h3">Shipping cart({{ cart.item_count }})</h2>
    {% if perc_change == 100 %}
      <div class="shipping-bar__message cart-drawer__black h6 d-flex">
        <div>
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M13.6482 14.6719L5.32614 6.34983C4.98449 6.00817 4.43055 6.00817 4.08889 6.34983C3.74724 6.69148 3.74724 7.24542 4.08889 7.58708L12.411 15.9092C12.7526 16.2508 13.3066 16.2508 13.6482 15.9092C13.9899 15.5675 13.9899 15.0136 13.6482 14.6719Z" fill="#FFD54F"></path>
              <path d="M12.1316 15.6324L11.0874 16.0072L9.51766 16.5729L7.22428 17.4002L5.65685 17.9635L2.00023 19.2799C1.20396 19.5666 0.433817 18.7962 0.720731 18L1.67585 15.3496L2.13782 14.0579L2.81664 12.1723L3.28097 10.883L4.36757 7.86841L12.1316 15.6324Z" fill="#FCB316"></path>
              <path d="M11.0874 16.0072L9.51767 16.5729L2.81665 12.1723L3.28098 10.8831L11.0874 16.0072Z" fill="#E53A35"></path>
              <path d="M7.22433 17.4001L5.6569 17.9635L1.6759 15.3495L2.13787 14.0579L7.22433 17.4001Z" fill="#3D82C4"></path>
              <path d="M7.27539 2.16631e-06C7.62676 2.85282e-06 7.93369 0.241422 8.00478 0.585519C8.49883 2.97675 8.50809 5.26911 7.23717 7.30039C7.04286 7.61095 6.61255 7.63851 6.3535 7.37947V7.37947C6.17947 7.20544 6.12952 6.94385 6.21605 6.71345C6.9246 4.82686 7.02411 2.93987 6.51418 1.05246C6.37511 0.537741 6.74222 1.12455e-06 7.27539 2.16631e-06V2.16631e-06Z" fill="#7CB342"></path>
              <path d="M10.4401 7.83434C10.1387 8.04574 9.72291 7.97273 9.51151 7.67127V7.67127C9.30008 7.36977 9.37314 6.95395 9.67468 6.74257L9.76701 6.67785C10.0847 6.45515 10.1902 6.03271 10.0146 5.68677L9.92358 5.50748C9.62476 4.91959 9.80672 4.19043 10.3471 3.81185V3.81185C10.7577 3.52417 10.8953 2.97703 10.6677 2.53027V2.53027C10.3682 1.94173 10.5502 1.21224 11.0909 0.833333L11.7357 0.382176C12.0374 0.171106 12.4531 0.244562 12.6642 0.546244V0.546244C12.8752 0.84791 12.8018 1.26355 12.5001 1.47463L12.4095 1.53809C12.092 1.76024 11.9866 2.18227 12.1624 2.52759L12.2524 2.70442C12.5522 3.29264 12.3702 4.02213 11.8295 4.40104V4.40104C11.4179 4.68936 11.2819 5.23786 11.5095 5.68587V5.68587C11.8083 6.27343 11.6264 7.00227 11.0863 7.38118L10.4401 7.83434Z" fill="#3D82C4"></path>
              <path d="M20 12.7246C20 12.3732 19.7586 12.0663 19.4145 11.9952C17.0233 11.5012 14.7309 11.4919 12.6996 12.7628C12.3891 12.9571 12.3615 13.3875 12.6205 13.6465V13.6465C12.7946 13.8205 13.0562 13.8705 13.2866 13.7839C15.1731 13.0754 17.0601 12.9759 18.9475 13.4858C19.4623 13.6249 20 13.2578 20 12.7246V12.7246Z" fill="#7CB342"></path>
              <path d="M12.1656 9.56002C11.9542 9.86149 12.0272 10.2772 12.3287 10.4887V10.4887C12.6302 10.7001 13.046 10.627 13.2574 10.3255L13.3221 10.2331C13.5448 9.91546 13.9672 9.80992 14.3132 9.98555L14.4925 10.0766C15.0804 10.3754 15.8095 10.1934 16.1881 9.65307V9.65307C16.4758 9.24243 17.0229 9.10486 17.4697 9.33244V9.33244C18.0582 9.63192 18.7877 9.44995 19.1666 8.90926L19.6178 8.26442C19.8288 7.96274 19.7554 7.54707 19.4537 7.336V7.336C19.152 7.12495 18.7364 7.19838 18.5253 7.50003L18.4619 7.59071C18.2397 7.90818 17.8177 8.01357 17.4724 7.83781L17.2955 7.7478C16.7073 7.448 15.9778 7.62996 15.5989 8.17065V8.17065C15.3106 8.58223 14.7621 8.71828 14.3141 8.49064V8.49064C13.7265 8.19181 12.9977 8.37378 12.6188 8.91382L12.1656 9.56002Z" fill="#3D82C4"></path>
              <path d="M18.5104 1.48958C19.1594 2.13858 18.8447 3.28454 18.025 3.69745C17.109 4.1589 16.2234 4.79531 15.3705 5.62034C15.0927 5.88912 14.6483 5.89835 14.375 5.625V5.625C14.1017 5.35165 14.1109 4.90731 14.3797 4.62947C15.2047 3.77663 15.8411 2.89101 16.3025 1.97498C16.7155 1.15529 17.8614 0.84059 18.5104 1.48958V1.48958Z" fill="#E53A35"></path>
              </svg>
            </div>
            <p class="">Congratulations ! You qualify for <strong class="free-shipping-highlight">FREE SHIPPING !</strong></p>
      </div>
    {% endif %}
    {% if perc_change == 100 %}
      {% comment %} <div class="shipping-bar__title font-bold text-md cart-drawer__black">Free shipping</div> {% endcomment %}
    {% else %}
      <div class="shipping-bar__message cart-drawer__black h6">
        <p>
          You are <strong>{{ change | times: 100 | money }}</strong> away from <strong>free shipping*</strong>
        </p>
      </div>
    {% endif %}
    <div class="shipping-bar__container">
      <div class="shipping-bar__filled" style="width: {{ perc_change | string | append: '%' }}">
        <div class="shipping__icon" style="left: {{ perc_change | string | append: '%' }}">
          {% comment %} <svg xmlns="http://www.w3.org/2000/svg" width="31.678" height="35.847" viewBox="0 0 31.678 35.847">
            <g id="Group_200290" data-name="Group 200290" transform="translate(-3.291 15.779) rotate(-45)">
            <path id="Path_301827" data-name="Path 301827" d="M.344,6.568A14.727,14.727,0,0,0,.173,2.1C.1,1.441-.237.615.3.226,2.236-1.181,2.36,4.375,3.017,5.8,4.124,4.508,5.131,2.977,6.74,2.337A2.954,2.954,0,0,1,7.9,2.045c4.156.113-3.324,3.435-2.831,4.911a12.869,12.869,0,0,1,4.963-.6,2.408,2.408,0,0,1,1.135.372c2.063,1.343-4.55,1.982-5.887,3.349" transform="translate(10.75 0)" fill="#318200"></path>
            <path id="Path_301828" data-name="Path 301828" d="M.8,8.065a12.059,12.059,0,0,1,.342-1.392,27.225,27.225,0,0,1,1.4-3.992c.641-1.178,3.03-4.265,8.537-1.671a49.368,49.368,0,0,1,7.286,3.915s4.678,3.025,1.748,7.883a30.183,30.183,0,0,1-6.086,6.888,18.436,18.436,0,0,1-5.567,3.351c-2.339.862-5.2,1.171-6.98-.689,0,0-2.811-1.23-.677-14.291" transform="translate(0 4.654)" fill="#A31207"></path>
            </g>
          </svg> {% endcomment %}
        </div>
      </div>
    </div>
    {% comment %} {% if perc_change == 100 %}
      <div class="shipping-bar__message cart-drawer__black h6">
        <p><strong>Yay!!</strong> you unlocked <strong>free shipping</strong></p>
      </div>
    {% endif %} {% endcomment %}
  </div>